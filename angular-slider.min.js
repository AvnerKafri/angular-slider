/*
 angular-slider v1.0.0 
 (c) 2013-2014 Venturocket, Inc. http://github.com/Venturocket 
 License: MIT 
*/
angular.module("vr.directives.slider",[]),angular.module("vr.directives.slider").controller("SliderCtrl",["$scope",function(a){var b=[];a.slideVars={mousePosition:0,sliderSize:0,sliderOffset:0},a.currentKnob=null,a.sliding=!1,this.options={precision:0,buffer:0,steps:0,stickiness:3,scale:function(a){return a},continuous:!1,vertical:!1,addBars:!0};var c=this.options;this.registerKnob=function(d){function e(b){var c=Math.min(a.ceiling,Math.max(b,a.floor));c==b?d.onChange(b):isNaN(c)||(d.ngModel.$setViewValue(c),a.$$phase||a.$apply())}if(b.length>0){for(var f=0;f<b.length;f++)if(d.ngModel.$modelValue>b[f].$modelValue){b.splice(f,0,d);break}}else b.push(d);return c.addBars,a.$watch(function(){return d.ngModel.$modelValue},function(a){e(a)}),a.$watch("floor",function(){e(d.ngModel.$modelValue)}),a.$watch("ceiling",function(){e(d.ngModel.$modelValue)}),{start:function(b){a.sliding||a.disabled||(a.currentKnob=d,a.sliding=!0,a.onStart(b))},destroy:function(){var a=b.indexOf(d);b.splice(a,1)}}},this.registerBar=function(){}}]),angular.module("vr.directives.slider").directive("ngSlider",["$document","$timeout",function(a){return{restrict:"EA",controller:"SliderCtrl",scope:!0,compile:function(b,c){if(angular.isUndefined(c.floor))throw"ngSlider Error: Floor not specified";if(angular.isUndefined(c.ceiling))throw"ngSlider Error: Ceiling not specified";return b.addClass("ng-slider"),function(b,c,d,e){function f(a){var c=b.dimensions(),d=(e.options.vertical?a.clientY:a.clientX)-b.dimensions().sliderOffset,f=e.options.vertical?b.currentKnob.elem[0].offsetHeight:b.currentKnob.elem[0].offsetWidth,g=Math.max(0,Math.min((d-f/2)/(c.sliderSize-f),1)),h=(g*(b.ceiling-b.floor)+b.floor).toFixed(e.options.precision);b.currentKnob.ngModel.$setViewValue(h),b.$apply()}function g(){b.sliding=!1}b.dimensions=function(){return{sliderSize:e.options.vertical?c[0].offsetHeight:c[0].offsetWidth,sliderOffset:e.options.vertical?c[0].offsetTop:c[0].offsetLeft}},e.valueToPercent=function(a,c){var d=e.options.vertical?c[0].offsetHeight:c[0].offsetWidth,f=d/b.dimensions().sliderSize*100;return(a-b.floor)/(b.ceiling-b.floor)*(100-f)+"%"},b.onStart=function(a){f(a)},b.$watch(function(){return b.$eval(d.ngDisabled)},function(a){b.disabled=angular.isDefined(a)&&a,b.disabled?c.addClass("disabled"):c.removeClass("disabled")}),d.$observe("ceiling",function(a){a=angular.isDefined(a)?parseFloat(a):0,b.ceiling=isNaN(a)?0:a}),d.$observe("floor",function(a){a=angular.isDefined(a)?parseFloat(a):0,b.floor=isNaN(a)?0:a}),b.$watch(function(){return b.$eval(d.ngSliderOptions)},function(a){angular.extend(e.options,angular.isDefined(a)&&angular.isObject(a)?a:{}),e.options.vertical?c.addClass("ng-slider-vertical").removeClass("ng-slider-horizontal"):c.addClass("ng-slider-horizontal").removeClass("ng-slider-vertical")},!0);var h=["mousemove","touchmove"],i=["mousecancel","touchcancel"],j=["mouseup","touchend"];window.PointerEvent?(h=["pointermove"],i=["pointercancel"],j=["pointerup"]):window.navigator.msPointerEnabled&&(h=["MSPointerMove"],i=["MSPointerCancel"],j=["MSPointerUp"]),angular.forEach(h,function(c){a.bind(c,function(a){b.sliding&&(a.preventDefault(),f(a))})}),angular.forEach(i.concat(j),function(c){a.bind(c,function(){b.sliding&&g()})})}}}}]).directive("ngSliderKnob",["$parse",function(a){return{restrict:"EA",require:["^ngSlider","^ngModel"],scope:!0,compile:function(b,c){if(angular.isUndefined(c.ngModel))throw"ngSliderKnob Error: ngModel not specified";return b.addClass("ng-slider-knob"),function(b,c,d,e){function f(c){a(d.ngModel).assign(b.$parent.$parent,c),b.$$phase||b.$apply()}var g=e[0],h=e[1],i=!0;b.knob=g.registerKnob({ngModel:h,elem:c,onChange:function(a){f(a),b.$viewValue=a,c.css(g.options.vertical?"top":"left",g.valueToPercent(a,c))},onStart:function(){c.addClass("active")},onEnd:function(){c.removeClass("active")}}),c.bind("$destroy",function(){b.knob.destroy()}),b.$watch(function(){return b.$eval(d.ngDisabled)},function(a){i=!a,a?c.addClass("disabled"):c.removeClass("disabled")});var j=["mousedown","touchstart"];window.PointerEvent?j=["pointerdown"]:window.navigator.MSPointerEnabled&&(j=["MSPointerDown"]),angular.forEach(j,function(a){c.bind(a,function(a){a.preventDefault(),b.knob.start(a)})})}}}}]).directive("ngSliderBar",function(){return{restrict:"EA",require:"^ngSlider",compile:function(a){return a.addClass("ng-slider-bar"),function(a,b,c,d){var e=d.registerBar({scope:a,attr:c});b.bind("$destroy",function(){e.destroy()}),c.$observe("low",function(a){e.updateLow(a)}),c.$observe("high",function(a){e.updateHigh(a)})}}}});